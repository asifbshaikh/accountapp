<%= form_tag({:action =>"upload"}, :multipart=> true, :remote => true, :class => "form-horizontal", :onSubmit =>"return checkForm(this); return false;") do %>
  <%= hidden_field_tag 'warehouse_id[]' %>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><i class="icon-remove"></i></button>
        <h4 class="modal-title" id="myModalLabel">Import Products</h4>
      </div>
      <div class="modal-body scroll-y" style="max-height:500px;">
        <div class="errorSection"></div>
          <div class="block">
            <%= label_tag "select_file", "select file", :class => "control-label-required"%>
            <%= file_field_tag 'file',:class=>"btn btn-white", :onchange=>"check_file()" %>
          </div>
      </div>     
          
        <div class="modal-footer">
          <div class='save-btn'></div>
            <button class="btnsave btn btn-sm btn-success" type='submit'  data-loading-text="Saving...">Save</button>
          <button type="button" class="btn btn-sm btn-default" data-dismiss="modal">Cancel</button>
        </div>
    </div>
  </div>
<%end%>
<script type="text/javascript">
  function check_file(){
    str=document.getElementById('file').value.toUpperCase();
    suffix=".CSV";
    if(str.indexOf(suffix, str.length - suffix.length) == -1){
    alert('File type not allowed,\nAllowed file: *.csv');
    document.getElementById('file').value='';
    }
  }
  function checkForm(f)
{
    if (f.elements['file'].value == "")
    {
        alert("Please select file !");
        $(".btnsave").remove();
        $(".save-btn").after("<button class='btn btn-sm btn-success btnsave' type='submit'  data-loading-text='Saving...'>Save</button>");
        return false;
    }
    else
    {
        f.submit();
        return false;
    }
}
</script>