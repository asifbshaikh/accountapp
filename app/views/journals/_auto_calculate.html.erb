<div id="jData">
<script>
  $(document).ready(function(){
	 cal()
        $('table#journal_line_items input:text').live('keyup', function(e){
		cal();
                e.preventDefault();
	});
	
	$("table#journal_line_items #cancel").live('click', function(e){
		setTimeout(function(){cal();}, 1500);
                e.preventDefault();
	});

	$('table#journal_line_items span#total').text(parseFloat($('input[name=total_paid]').val()).toFixed(2));
  });
  function cal(){
	var i = 0;
	var total = 0;
  var credit_total = 0;
	$('table#journal_line_items tbody tr').each(function(){
		var amount = 0;
	  var credit_amount = 0;
  	if (($('table#journal_line_items tbody tr:eq(' + i + ')').is(":visible")) && $('table#journal_line_items tbody tr:eq(' + i + ') #amount').val() && $('table#journal_line_items tbody tr:eq(' + i + ') #credit_amount').val() ) {
			var amount = parseFloat($('table#journal_line_items tbody tr:eq(' + i + ') #amount').val());
      var credit_amount = parseFloat($('table#journal_line_items tbody tr:eq(' + i + ') #credit_amount').val());
      total = total + amount;
      credit_total = credit_total + credit_amount;
		} 
		i++;
	});
	$('input[name=total_paid]').val(total);
	$('table#journal_line_items span#total').text(total.toFixed(2));
	$('table#journal_line_items span#credittotal').text(credit_total.toFixed(2));
	
	}
</script>
</div>